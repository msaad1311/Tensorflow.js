{"version":3,"sources":["index.js"],"names":["backer","t","console","log","img","document","getElementById","bgs","effect_blur","effect_gray","blurEffect","grayEffect","loadAndPredict","bodyPix","load","architecture","outputStride","quantBytes","net","segmentPerson","flipHorizontal","internalResolution","segmentationThreshold","segmentation","foregroundColor","r","g","b","a","backgroundColor","backgroundDarkeningMask","toMask","addEventListener","checked","frameMerger","background_rm","blurr","grayy","canvas","width","height","ctx","getContext","globalCompositeOperation","putImageData","drawImage","filter"],"mappings":"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","file":"Background_Removal.e31bb0bc.js","sourceRoot":"..","sourcesContent":["function backer(t){\r\n  console.log('hello');\r\n  // const bgs = document.getElementById(id);\r\n}\r\nconst img = document.getElementById('image');\r\nconst bgs = document.getElementById('image_back');\r\nlet effect_blur = document.getElementById('blurrer');\r\nlet effect_gray = document.getElementById('grayer');\r\nlet blurEffect=false;\r\nlet grayEffect=false;\r\n\r\nasync function loadAndPredict() {\r\n    const net = await bodyPix.load({\r\n        architecture: 'MobileNetV1',\r\n        outputStride: 16,\r\n        quantBytes: 4\r\n      });\r\n    const segmentation = await net.segmentPerson(img, {\r\n        flipHorizontal: false,\r\n        internalResolution: 'full',\r\n        segmentationThreshold: 0.8\r\n    });\r\n    const foregroundColor = { r: 0, g: 0, b: 0, a: 255 };\r\n    const backgroundColor = { r: 0, g: 0, b: 0, a: 0 };\r\n    const backgroundDarkeningMask = bodyPix.toMask(segmentation, foregroundColor, backgroundColor, false);\r\n    \r\n    // if (!(blurEffect && grayEffect)){\r\n    //   frameMerger(img,blurEffect,grayEffect);\r\n    // }\r\n    effect_blur.addEventListener('change', function () {\r\n      if (effect_blur.checked) {\r\n        blurEffect=true;\r\n        frameMerger(backgroundDarkeningMask,blurEffect,grayEffect);\r\n        // console.log('it is on');\r\n        // console.log(grayEffect);\r\n      } else {\r\n        blurEffect=false;\r\n        frameMerger(backgroundDarkeningMask,blurEffect,grayEffect);\r\n        // console.log('it is off');\r\n        // console.log(grayEffect);\r\n      }\r\n    })\r\n\r\n    effect_gray.addEventListener('change', function () {\r\n      if (effect_gray.checked) {\r\n        grayEffect=true;\r\n        frameMerger(backgroundDarkeningMask,blurEffect,grayEffect);\r\n        // console.log('it is on');\r\n        // console.log(blurEffect);\r\n      } else {\r\n        grayEffect=false;\r\n        frameMerger(backgroundDarkeningMask,blurEffect,grayEffect);\r\n        // // console.log('it is off');\r\n        // console.log(blurEffect);\r\n      }\r\n    })\r\n    \r\n    }\r\nfunction frameMerger(background_rm,blurr,grayy){\r\n  if (!background_rm){\r\n    return\r\n  }\r\n  // console.log(bgs);\r\n  const canvas = document.getElementById('canvas');\r\n  \r\n  canvas.width = img.width;\r\n  canvas.height = img.height;\r\n  let ctx = canvas.getContext('2d');\r\n  \r\n  ctx.globalCompositeOperation='destination-over';\r\n  ctx.putImageData(background_rm, 0, 0);\r\n  ctx.globalCompositeOperation = 'source-in';\r\n  // // ctx.putImageData(img, 0, 0);\r\n  ctx.drawImage(img, 0, 0, img.width, img.height);\r\n  ctx.globalCompositeOperation = 'destination-atop';\r\n  if (blurr){\r\n    ctx.filter='blur(3px)';\r\n  }\r\n  if (grayy){\r\n    ctx.filter='grayscale(1)';\r\n  }\r\n  if (blurr && grayy){\r\n    ctx.filter='blur(3px) grayscale(1)';\r\n  }\r\n  ctx.drawImage(bgs, 0, 0,bgs.width,bgs.height);\r\n  \r\n  }\r\n\r\n   \r\nloadAndPredict();\r\n"]}